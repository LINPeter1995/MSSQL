 --	Module 6 - Lab02 CHECK ???????

--	UNIQUE ?M CHECK ?????????????????A???O?£Z?j????? SQL Server ???????????????C
--	CHECK ????????i?H????s?J???w???????A???w?@??£Xh??????i??????????C
--	??p : ?~??@?w???i???t?? (Age>0, Age<120)?C

--	CHECK ????????????? FOREIGN KEY ????????A?£Z?????J???ïâ??C 
--			???????P?b???P?w??O?_??????äD?G
--						FOREIGN KEY ??????? : ?q?t?@????????o?????C
--						CHECK ??????? : ?q??v?????]?w?????B????P?w?????C
--	?p?G?]?w CHECK ????????????]?w?????\ NULL?A?????p?G???J NULL ??A
--			SQL Server ?|???\???J NULL ??B???|??^???~?A?o?O?]???@
--			CHECK ????????u????B???P?_?? FALSE ????A?? NULL ?|?P?_?? UNKNOWN?C


use LabDB;
go

--	??? Member ???????? Age ??d???????
--	?? DROP ?W?? LabDB ?????? TABLE
drop table if exists Member;
go

--	??? Age ??d??????? 0 < Age < 150
create table Member (
	ID int identity(1, 1) not null,     -- (1, 1) 1 ?}?l, ?W?q 1
	Name varchar (50) null,
	Age int null check (Age > 0 and Age < 150)  
);
go

--	?s?W??????  
insert into Member (Age) values (49);  
go  5

select * from Member

-- Error : 	Adding values that will be fail under the check constraint  
insert into Member (Age) values (200);  
go

--	Member ?????s?W?@??~?????,??B?W?w Age ?????j?? Seniority
alter table Member
	add Seniority int null default 1,                     --???w?]??1, ???????H??W?? Age>0 ??????W?w
	check(Age > Seniority);
go

select * from Member

-- ?s?W??????  
insert into Member (Age, Seniority) values (49, 25);  
go  

insert into Member (Age, Seniority) values (25, 30);  
go
